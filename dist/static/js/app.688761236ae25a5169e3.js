webpackJsonp([1],{0:function(t,e){},"41gc":function(t,e){},"7q2U":function(t,e){},GK12:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"gameContainer"}},[e("button",{on:{click:this.createLobby}},[this._v("Create Lobby")]),this._v(" "),e("button",{on:{click:this.invitePlayer}},[this._v("Invite")])])},staticRenderFns:[]};var i=s("VU/8")({name:"Game",methods:{createLobby:function(){this.$store.dispatch("createLobby")},invitePlayer:function(){this.$store.dispatch("invitePlayer","notAndrew")}},created:function(){}},n,!1,function(t){s("iXfF")},"data-v-7c7de3da",null).exports,r={name:"Chat",data:function(){return{chatText:"",messages:[]}},methods:{sendMessage:function(){console.log({username:this.$store.getters.currentUser.username,messageText:this.chatText}),this.$store.dispatch("sendMessage",{username:this.$store.getters.currentUser.username,messageText:this.chatText}),this.chatText=""}},computed:{currentChatRoom:function(){return this.messages=[],this.$store.getters.currentChatRoom}},mounted:function(){var t=this;this.$options.sockets.message=function(e){t.messages.push(e)}},updated:function(){var t=document.getElementById("chatMessages");t.scrollTop=t.scrollHeight-t.clientHeight}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"chatContainer"}},[s("div",{attrs:{id:"chatRoomName"}},[s("h6",{staticClass:"title is-6"},[t._v(t._s(t.currentChatRoom))])]),t._v(" "),s("div",{attrs:{id:"chatMessages"}},t._l(t.messages,function(e){return s("div",{key:e.length,staticClass:"chatMessage"},[s("div",[s("span",{staticClass:"messageUsernameText has-text-weight-bold"},[t._v(t._s(e.username))]),t._v(" "),s("span",{staticClass:"messageText"},[t._v(t._s(e.messageText))]),t._v(" "),s("span",{staticClass:"messageTimestampText is-pulled-right"},[t._v(t._s(e.timestamp))])]),t._v(" "),s("hr",{staticClass:"messageHr"})])})),t._v(" "),s("div",{attrs:{id:"chatSendMessage"}},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.chatText,expression:"chatText"}],staticClass:"input",attrs:{type:"text",placeholder:"Press Enter to send a chat"},domProps:{value:t.chatText},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.sendMessage(e):null},input:function(e){e.target.composing||(t.chatText=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:t.sendMessage}},[t._v("\n            Send\n          ")])])])])])},staticRenderFns:[]};var c=s("VU/8")(r,o,!1,function(t){s("mDA2")},"data-v-06a718cd",null).exports,l={name:"InviteModal",data:function(){return{modalActive:!1,inviteUsername:""}},methods:{dismissModal:function(){this.modalActive=!1,this.inviteUsername=""},respondToInvite:function(t){console.log(this.inviteUsername),this.$store.dispatch("inviteResponse",{answer:t,inviteeUsername:this.inviteUsername}),this.dismissModal(),this.inviteUsername=""}},created:function(){var t=this;this.$options.sockets.gameInvite=function(e){console.log(e),t.inviteUsername=e,t.modalActive=!0}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"inviteModalContainer"}},[s("div",{staticClass:"modal",class:{"is-active":t.modalActive}},[s("div",{staticClass:"modal-background"}),t._v(" "),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v("Game Invite")]),t._v(" "),s("button",{staticClass:"delete",attrs:{"aria-label":"close","data-bulma-modal":"close"},on:{click:t.dismissModal}})]),t._v(" "),s("section",{staticClass:"modal-card-body"},[s("p",[t._v(t._s(t.inviteUsername)+" has invited you to a game.")])]),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("button",{staticClass:"button is-success",on:{click:function(e){t.respondToInvite(!0)}}},[t._v("Accept")]),t._v(" "),s("button",{staticClass:"button",attrs:{"data-bulma-modal":"close"},on:{click:function(e){t.respondToInvite(!1)}}},[t._v("Cancel")])])])])])},staticRenderFns:[]};var d={name:"Home",components:{Game:i,InviteModal:s("VU/8")(l,u,!1,function(t){s("jDn3")},"data-v-fa20bdac",null).exports,Chat:c}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("Game"),this._v(" "),e("Chat"),this._v(" "),e("InviteModal")],1)},staticRenderFns:[]};var v=s("VU/8")(d,m,!1,function(t){s("W2bJ")},"data-v-7f11d910",null).exports,h=s("mvHQ"),p=s.n(h),g={name:"Login",data:function(){return{user:{username:"",password:""},errors:[]}},methods:{login:function(){var t=this;this.errors=[],this.$store.commit("LOGIN"),this.axios.post("https://shrouded-eyrie-80233.herokuapp.com/api/login",this.user).then(function(e){t.$store.commit("LOGIN_SUCCESS",e.data.user),localStorage.setItem("user",p()(e.data.user)),t.$router.push("/Home")}).catch(function(e){e.response.data.message&&t.errors.push(e.response.data.message),t.$store.commit("LOGIN_FAILURE")})},clearErrors:function(){this.errors=[]}},computed:{isLoading:function(){return this.$store.getters.isLoading}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-img"},[s("div",{staticClass:"container"},[s("div",{staticClass:"column is-three-fifths is-offset-one-fifth has-top-spacer"},[s("form",[s("div",{staticClass:"box"},[s("h3",{staticClass:"title is-3 has-text-centered"},[t._v("Log In")]),t._v(" "),t.errors.length?s("article",{staticClass:"message is-danger"},[s("div",{staticClass:"message-body"},[s("div",[s("ul",t._l(t.errors,function(e){return s("li",{key:e},[t._v(t._s(e))])}))])])]):t._e(),t._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"input",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.user.username},on:{click:t.clearErrors,input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{click:t.clearErrors,input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),t._m(1)])]),t._v(" "),s("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.isLoading},on:{click:t.login}},[t._v("Log In")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"has-text-centered"},[s("span",[t._v("Don't have an account?")]),t._v(" "),s("router-link",{attrs:{tag:"a",to:"/Signup"}},[s("a",[t._v("Sign Up")])])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-lock"})])}]};var _=s("VU/8")(g,f,!1,function(t){s("WQWm")},"data-v-43d29f8e",null).exports,C={name:"SignUp",data:function(){return{newUser:{username:"",password:"",reEnteredPassword:""},errors:[]}},methods:{register:function(){var t=this;this.errors=[],this.validateForm()&&this.axios.post("https://shrouded-eyrie-80233.herokuapp.com/api/register",{username:this.newUser.username,password:this.newUser.password}).then(function(e){t.$router.push("/Login")}).catch(function(e){t.errors.push(e.response.data.message)})},validateForm:function(){return this.newUser.username||this.errors.push("Username cannot be empty"),this.newUser.password||this.errors.push("Password cannot be empty"),this.newUser.reEnteredPassword||this.errors.push("Re-Entered password cannot be empty"),this.newUser.password!==this.newUser.reEnteredPassword&&this.errors.push("Passwords do not match"),!this.errors.length},clearErrors:function(){this.errors=[]}},computed:{isLoading:function(){return console.log(this.$store.getters.isLoading),this.$store.getters.isLoading}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-img"},[s("div",{staticClass:"container"},[s("div",{staticClass:"column is-three-fifths is-offset-one-fifth has-top-spacer"},[s("form",[s("div",{staticClass:"box"},[s("h3",{staticClass:"title is-3 has-text-centered"},[t._v("Sign Up")]),t._v(" "),t.errors.length?s("article",{staticClass:"message is-danger"},[s("div",{staticClass:"message-body"},[t._v("\n            Please correct the following and try again:\n            "),s("div",[s("ul",t._l(t.errors,function(e){return s("li",{key:e},[t._v(t._s(e))])}))])])]):t._e(),t._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Username")]),t._v(" "),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.username,expression:"newUser.username"}],staticClass:"input",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.newUser.username},on:{click:t.clearErrors,input:function(e){e.target.composing||t.$set(t.newUser,"username",e.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.password,expression:"newUser.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.newUser.password},on:{click:t.clearErrors,input:function(e){e.target.composing||t.$set(t.newUser,"password",e.target.value)}}}),t._v(" "),t._m(1)])]),t._v(" "),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Re-Enter Password")]),t._v(" "),s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser.reEnteredPassword,expression:"newUser.reEnteredPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"Re-Enter Password"},domProps:{value:t.newUser.reEnteredPassword},on:{click:t.clearErrors,input:function(e){e.target.composing||t.$set(t.newUser,"reEnteredPassword",e.target.value)}}}),t._v(" "),t._m(2)])]),t._v(" "),s("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":t.isLoading},on:{click:t.register}},[t._v("Sign Up")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"has-text-centered"},[s("span",[t._v("Already Sign Up?")]),t._v(" "),s("router-link",{attrs:{tag:"a",to:"/Login"}},[s("a",[t._v("Log In")])])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-lock"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-lock"})])}]};var b=s("VU/8")(C,w,!1,function(t){s("Qzjv")},"data-v-55655cb7",null).exports,U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar is-primary",attrs:{role:"navigation","aria-label":"main navigation"}},[s("div",{staticClass:"navbar-brand"},[s("router-link",{attrs:{tag:"a",to:"/Home"}},[s("a",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[s("h4",{staticClass:"title is-4"},[t._v("2p Snake.io")])])]),t._v(" "),s("a",{staticClass:"navbar-burger",class:{"is-active":t.showDropdown&&t.isLoggedIn},attrs:{role:"button","aria-label":"menu","aria-expanded":"false"},on:{click:function(e){t.showDropdown=!t.showDropdown}}},[s("span",{attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{attrs:{"aria-hidden":"true"}})])],1),t._v(" "),s("div",{staticClass:"navbar-menu",class:{"is-active":t.showDropdown&&t.isLoggedIn},attrs:{id:"navbarBasicExample"}},[s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item"},[s("div",{staticClass:"buttons"},[t.isLoggedIn?s("a",{staticClass:"button is-light",on:{click:t.logout}},[t._v("\n            Log Out\n          ")]):t._e()])])])])])])},staticRenderFns:[]};var k={name:"app",components:{Home:v,Login:_,SignUp:b,Nav:s("VU/8")({name:"Nav",data:function(){return{showDropdown:!1}},methods:{logout:function(){this.$store.commit("LOGOUT"),this.$router.push("/Login")}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}}},U,!1,function(t){s("41gc")},"data-v-0a2068f0",null).exports}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Nav"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var E=s("VU/8")(k,L,!1,function(t){s("7q2U")},null,null).exports,x=s("/ocq");a.a.use(x.a);var I,$=new x.a({routes:[{path:"/Login",component:_},{path:"/SignUp",component:b},{path:"/",component:v},{path:"**",component:v}]}),y=s("bOdI"),S=s.n(y),R=s("woOf"),T=s.n(R),O=s("NYxO");a.a.use(O.a);var P,N={isLoggedIn:!!localStorage.getItem("user")||!1,user:JSON.parse(localStorage.getItem("user"))||null,isLoading:!1,socket:{connected:!1,currentRoom:"Room -1",error:!1}},M=new O.a.Store({state:T()({},N),mutations:(I={},S()(I,"LOGIN",function(t){t.isLoading=!0}),S()(I,"LOGIN_SUCCESS",function(t,e){t.isLoggedIn=!0,t.isLoading=!1,t.user=e,!1===t.socket.connected&&location.reload()}),S()(I,"LOGIN_FAILURE",function(t){t.isLoggedIn=!1,t.isLoading=!1}),S()(I,"LOGOUT",function(t){t.isLoggedIn=!1,t.user=null,localStorage.removeItem("user"),console.log(N.socket),t.socket={connected:!1,currentRoom:"Room -1",error:!1}}),S()(I,"SOCKET_CONNECT",function(t){t.socket.connected=!0}),S()(I,"SOCKET_DISCONNECT",function(t){t.socket.connected=!1}),S()(I,"SOCKET_ROOMCHANGE",function(t,e){t.socket.currentRoom=e[0]}),S()(I,"SOCKET_ERROR",function(t,e){t.socket.error=e.error}),I),getters:{isLoggedIn:function(t){return t.isLoggedIn},isLoading:function(t){return t.isLoading},getToken:function(t){return t.user&&t.user.token?t.user.token:""},currentChatRoom:function(t){return t.socket.currentRoom},currentUser:function(t){return t.user}},actions:{sendMessage:function(t,e){t.commit;Q.$socket.emit("SEND_MESSAGE",e)},createLobby:function(){Q.$socket.emit("CREATE_LOBBY")},invitePlayer:function(t,e){t.commit;Q.$socket.emit("invitePlayer",e)},inviteResponse:function(t,e){t.commit;console.log("invite response"),Q.$socket.emit("inviteResponse",e)}}}),G=s("mtWM"),A=s.n(G),F=s("Rf8U"),D=s.n(F),H=s("hMcO"),V=s.n(H),W=s("DmT9"),K=s.n(W),j=s("OLUw"),J=s.n(j);s("GK12");a.a.config.productionTip=!1,null!==localStorage.getItem("user")?(console.log(localStorage.getItem("user")),P=JSON.parse(localStorage.getItem("user")).token):P="",a.a.use(D.a,A.a),a.a.use(V.a,K()("https://shrouded-eyrie-80233.herokuapp.com",{query:{token:P}}),M),$.beforeEach(function(t,e,s){var a=!["/Login","/Signup"].includes(t.path),n=localStorage.getItem("user");if(a&&!n)return s("/Login");s()});var Q=e.default=new a.a({el:"#app",router:$,store:M,sockets:J.a,render:function(t){return t(E)}})},OLUw:function(t,e){t.exports={connect:function(){console.log("socket connected")},roomChange:function(t){console.log(t)},broadcast:function(t){console.log(t)}}},Qzjv:function(t,e){},W2bJ:function(t,e){},WQWm:function(t,e){},iXfF:function(t,e){},jDn3:function(t,e){},mDA2:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.688761236ae25a5169e3.js.map